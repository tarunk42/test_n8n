<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Finance Bot Demo</title>
    <!-- n8n chat widget styles -->
    <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
    <style>
      body,html{margin:0;padding:0;font-family:system-ui,Arial,sans-serif;background:#f9fafb;color:#111827}
      main{max-width:800px;margin:3rem auto;padding:1.5rem;text-align:center}
      h1{font-size:2.25rem;font-weight:600;margin-bottom:1rem}
      p{font-size:1.125rem;margin-bottom:2rem}
      #n8n-chat{position:relative;min-height:520px}
    </style>
  </head>
  <body>
    <main>
      <h1>Finance Bot</h1>
      <p>Ask anything about stocks, crypto, or company fundamentals. (Quick demo uses a temporary CORS proxy.)</p>
      <div id="n8n-chat"></div>
    </main>

    <script type="module">
      import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

      // ðŸš§  TEMPORARY CORS WORKâ€‘AROUND  ðŸš§
      // n8n Cloud doesnâ€™t send CORS headers yet. We prepend a free proxy that adds them.
      // For production either:
      //   â€¢ host your own n8n and enable CORS, or
      //   â€¢ add a tiny /api/chat proxy route on the same domain.
      const corsProxy = 'https://corsproxy.io/?';
      const webhookUrl = 'https://skull42.app.n8n.cloud/webhook/e914f8f8-c1ac-4e15-838c-67c8b50ce8d0/chat';

      createChat({
        target: '#n8n-chat',
        webhookUrl: corsProxy + webhookUrl,
        title: 'FinBot',
        mode: 'window',
        metadata: { source: 'renderâ€‘demo' },
        initialMessages: [
          'Hi there! ðŸ‘‹',
          'I am FinBot. Ask me anything about markets!',
        ],
      });
    </script>
  </body>
</html>
